// Generated by CoffeeScript 1.12.6
(function() {
  var disableAccount, resetPassword, updatePassword;

  updatePassword = function(e) {
    e.preventDefault();
    return apiCall("POST", "/api/user/update_password", $("#password-update-form").serializeObject()).done(function(data) {
      switch (data['status']) {
        case 1:
          ga('send', 'event', 'Authentication', 'UpdatePassword', 'Success');
          break;
        case 0:
          ga('send', 'event', 'Authentication', 'UpdatePassword', 'Failure::' + data.message);
      }
      return apiNotify(data, "/account");
    });
  };

  resetPassword = function(e) {
    var form;
    e.preventDefault();
    form = $("#password-reset-form").serializeObject();
    form["reset-token"] = window.location.hash.substring(1);
    return apiCall("POST", "/api/user/confirm_password_reset", form).done(function(data) {
      ga('send', 'event', 'Authentication', 'ResetPassword', 'Success');
      return apiNotify(data, "/login");
    });
  };

  disableAccount = function(e) {
    e.preventDefault();
    return confirmDialog("This will disable your account, drop you from your team, and prevent you from playing!", "Disable Account Confirmation", "Disable Account", "Cancel", function() {
      var form;
      form = $("#disable-account-form").serializeObject();
      return apiCall("POST", "/api/user/disable_account", form).done(function(data) {
        ga('send', 'event', 'Authentication', 'DisableAccount', 'Success');
        return apiNotify(data, "/");
      });
    });
  };

  $(function() {
    $("#password-update-form").on("submit", updatePassword);
    $("#password-reset-form").on("submit", resetPassword);
    return $("#disable-account-form").on("submit", disableAccount);
  });

}).call(this);
